<div class="wrapper main-content-graficas">
  <div class="section-home">
    <div class="body-home">
      <div class="row mt-5 mb-5">
        <div class="col-12">
          <span class="title-perfil">Análisis De Datos Del Sistema</span>
        </div>
      </div>

      <!-- Indicadores de carga -->
      <div *ngIf="cargandoUsuarios || cargandoMaterias" class="row mb-3">
        <div class="col-12">
          <div class="alert alert-info" role="alert">
            <i class="bi bi-hourglass-split me-2"></i>
            Cargando datos dinámicos del sistema...
          </div>
        </div>
      </div>

      <div class="container">
        <!-- Título de la primera sección de gráficas -->
        <div class="row mt-3 mb-5" style="text-align: center;">
          <div class="col-12">
            <div class="alert alert-primary" role="alert">
              <span class="title-table">Análisis De Materias</span>
            </div>
          </div>
        </div>

        <!-- Gráficas de materias -->
        <div class="graph-section">
          <div class="graph">
            <div *ngIf="cargandoMaterias" class="text-center p-5">
              <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Cargando...</span>
              </div>
              <p class="mt-2">Cargando distribución de materias por día</p>
            </div>
            <div *ngIf="!cargandoMaterias">
              <!-- Gráfica de línea - Materias por día -->
              <h6 class="text-center mb-3">Materias por día de la semana</h6>
              <canvas
                baseChart
                [type]="lineChartType"
                [data]="lineChartData"
                [plugins]="lineChartPlugins"
                [options]="lineChartOptions">
              </canvas>
            </div>
          </div>

          <div class="graph">
            <div *ngIf="cargandoMaterias" class="text-center p-5">
              <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Cargando...</span>
              </div>
              <p class="mt-2">Cargando materias por programa educativo</p>
            </div>
            <div *ngIf="!cargandoMaterias">
              <!-- Gráfica de barras - Materias por programa -->
              <h6 class="text-center mb-3">Materias por programa educativo</h6>
              <canvas
                baseChart
                [type]="barChartType"
                [data]="barChartData"
                [plugins]="barChartPlugins"
                [options]="barChartOptions">
              </canvas>
            </div>
          </div>
        </div>

        <!-- Gráficas de usuarios -->
        <div class="row mt-3 mb-5" style="text-align: center;">
          <div class="col-12">
            <div class="alert alert-primary" role="alert">
              <span class="title-table">Análisis De Usuarios</span>
            </div>
          </div>
        </div>

        <!-- Gráficas de usuarios -->
        <div class="user-section">
          <div class="graph">
            <div *ngIf="cargandoUsuarios" class="text-center p-5">
              <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Cargando...</span>
              </div>
              <p class="mt-2">Cargando distribución de usuarios</p>
            </div>
            <div *ngIf="!cargandoUsuarios">
              <!-- Gráfica de pastel - Usuarios por rol -->
              <h6 class="text-center mb-3">Distribución de usuarios por rol</h6>
              <canvas
                baseChart
                [type]="pieChartType"
                [data]="pieChartData"
                [plugins]="pieChartPlugins"
                [options]="pieChartOptions">
              </canvas>
            </div>
          </div>

          <div class="graph">
            <div *ngIf="cargandoUsuarios" class="text-center p-5">
              <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Cargando...</span>
              </div>
              <p class="mt-2">Cargando estadísticas de usuarios</p>
            </div>
            <div *ngIf="!cargandoUsuarios">
              <!-- Gráfica de dona - Usuarios por rol -->
              <h6 class="text-center mb-3">Proporción de usuarios por rol</h6>
              <canvas
                baseChart
                [type]="doughnutChartType"
                [data]="doughnutChartData"
                [plugins]="doughnutChartPlugins"
                [options]="doughnutChartOptions">
              </canvas>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
